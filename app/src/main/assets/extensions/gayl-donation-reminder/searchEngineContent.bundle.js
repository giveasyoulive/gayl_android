!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=43)}({0:function(e,t,r){var n=r(1),o=r(4),i=r(7);function a(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e){if(!e)return!1;for(var t=[/^(http|https):\/\/www.google.(co.uk|com)/g,/^(http|https):\/\/www.bing.com\/search/g,/^(http|https):\/\/uk.search.yahoo.com\/search/g],r=0;r<t.length;r++)if(e.match(t[r]))return!0;return!1}function u(e){return/https?:\/\/(.*)giveasyoulive.(com|uk)/g.test(e)}function c(e,t,r){var n=document.createElement(e);return a(t)?t.forEach(function(e){e&&n.classList.add(e)}):t&&n.classList.add(t),r&&(n.textContent=r),n}e.exports={contentScriptInitialise:function(e,t){window.top===window&&("Safari"===o()?t&&new e:new e)},createError:function(e){var t=new Error;return t.type=e,t},dom:c,findParentWithClassName:function(e,t){for(var r=e;!r.classList.contains(t);)if(null===(r=r.parentNode))return null;return r},forEach:function(e,t){for(var r=0;r<e.length;r++)t(e[r])},getTimestamp:function(){return Date.now()},getDayAndYear:function(){var e=new Date;return e.getDay()+1+"-"+(e.getYear()+1900)},getGaylUrl:function(e){if(!e)return n.gaylUrl;var t=0===e.indexOf("/");return n.gaylUrl+(t?"":"/")+e},getLastItem:function(e){return a(e)?0==e.length?null:e[e.length-1]:null},hasProperties:function(e,t){return!t||!t.length||(t.forEach(function(t){if(!e.hasOwnProperty(t))return!1}),!0)},img:function(e,t,r){var n=c("img",r);return n.src=e,n.alt=t,n},insertAfter:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},isAndroidApp:function(){return"Firefox"===o()&&"Android"===i()},isArray:a,isClickthrough:function(e){return!!e&&e.indexOf("statistics/gayl/clickthrough")>0},isGiveasyouLive:u,isGiveasyouLiveEmail:function(e){return!!e&&e.indexOf("giveasyoulive-emails.com")>0},isMajorVersionUpdate:function(e,t){if(!t)return!1;if(!e&&t)return!0;for(var r=e.split("."),n=t.split("."),o=0;o<r.length;o++){if(n[o]>r[o])return!0;if(1===o)return!1}},isSerp:s,isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isRetailerPage:function(e){return!u(e)&&!s(e)},isUndefined:function(e){return void 0===e},logObject:function(e){if(!e)return"";var t="";for(var r in e)e.hasOwnProperty(r)&&(t+=r+":"+e[r]+",");return t},markFavourites:function(e,t){e=e||[];var r=(t=t||[]).map(function(e){return e.id});return e.forEach(function(e){e.isFavourite=r.includes(e.id)}),e},removeChildren:function(e){if(e&&e.hasChildNodes())for(;e.firstChild;)e.removeChild(e.firstChild)},text:function(e){return document.createTextNode(e)},toBoolean:function(e){return"true"===e},truncateCauseName:function(e,t){var r=e.name.length;return e.truncatedName=r<t?e.name:e.name.substring(0,t-"...".length)+"...",e},svgDom:function(e,t){var r=document.createElementNS("http://www.w3.org/2000/svg",e);return t?(a(t)?t.forEach(function(e){e&&r.classList.add(e)}):r.classList.add(className),r):r},whenDocumentReady:function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",function(){e()})}}},1:function(e,t,r){const n=r(8);e.exports=Object.assign({...n},{apiBase:"https://www.giveasyoulive.com/api/v1/",apiBaseV2:"https://www.giveasyoulive.com/api/v2/",env:"production",gaylDomain:"giveasyoulive.com",gaylUrl:"https://www.giveasyoulive.com"})},2:function(e,t){var r;"undefined"!=typeof chrome&&chrome.runtime&&(r=chrome.runtime),"undefined"!=typeof browser&&browser.runtime&&(r=browser.runtime),e.exports=r},3:function(e,t){e.exports={POPUP_LOADING_ACCOUNT_OPTIONS:"Loading account...",POPUP_LOADING_CAUSE_INFO:"Loading cause...",POPUP_LOADING_FAVOURITES:"Loading favourites...",POPUP_LOADING_GLOBAL:"Loading...please wait.",POPUP_LOADING_SIMILAR_STORES:"Loading similar stores...",POPUP_LOADING_POPULAR_STORES:"Loading popular stores...",POPUP_LOADING_STORE_SEARCH:"Searching...",POPUP_NO_FAVOURITES:"No favourite stores yet. Why not try adding some?",POPUP_NO_SIMILAR_STORES:"No similar stores were found for this retailer.",POPUP_NO_SEARCH_RESULTS:"No results found for $$query$$.",ERROR_TIMEOUT_POPUP:"An error occured, please close, and re-open this popup. If the problem persists, please let us know @ help@everyclick.com",ERROR_ACCOUNT_OPTION_LOAD:"Failed to load, please re-open to try again.",STORE_CONFIRMATION_DIALOG_QUESTION:"Would you like your purchase to raise a donation for $$causeName$$?",STORE_CONFIRMATION_DIALOG_EARN_NEW_CUSTOMERS:"Earn up to $$maxStoreRate$$ with $$storeName$$ if you're a new customer",STORE_CONFIRMATION_DIALOG_EARN:"Earn up to $$maxStoreRate$$ with $$storeName$$",STORE_CONFIRMATION_DIALOG_YES:"Raise a donation",STORE_THANK_YOU_OK:"OK, got it",STORE_THANK_YOU_INTRO:"Thank you.",STORE_THANK_YOU_BODY_NEW_CUSTOMERS:"If you're a new customer, purchases can raise up to $$maxStoreRate$$ of your total purchase for $$causeName$$.",STORE_THANK_YOU_BODY:"Purchases can raise up to $$maxStoreRate$$ of your total purchase for $$causeName$$.",SERP_BUTTON_TEXT:"Shop & raise up to $$maxStoreRate$$ >",SERP_LINK_TEXT:"Donates up to $$maxStoreRate$$",API_ERROR_MESSAGES:{InvalidCredentials:"Invalid email or password."},REQUEST_ERROR_MESSAGES:{0:"The request timed out, please try again."},GENERIC_ERROR_MESSAGE:"An error occurred."}},4:function(e,t){e.exports=function(e){var t=e||navigator.userAgent;return/edg([ea]|ios)/i.test(t)?"Edge":/chrome|crios|crmo/i.test(t)?"Chrome":/safari|applewebkit/i.test(t)?"Safari":/firefox|iceweasel|fxios/i.test(t)?"Firefox":null}},43:function(e,t,r){var{Message:n,MessageSubject:o}=r(6),{SERP_BUTTON_TEXT:i,SERP_LINK_TEXT:a}=r(3),{contentScriptInitialise:s,dom:u,forEach:c,insertAfter:l,isSerp:d,text:f,whenDocumentReady:h}=r(0),E=(r(63),r(1),r(2)),R=window.location.href.indexOf("debug=true")>-1;class S{constructor(){this.rules=null,this.host=window.location.hostname,this.extracted=[],this.domParser=new DOMParser,this.bindEventHandlers(),this.requestRules()}bindEventHandlers(){E.onMessage.addListener(this.onMessage.bind(this))}log(){for(var e=0;e<this.extracted.length;e++){var{url:t,visibleLink:r,title:n}=this.extracted[e];console.log(e+1,n.textContent,t)}}requestRules(){E.sendMessage(new n(o.GET_SERP_RULES))}onMessage(e,t,r){var{payload:n,subject:i}=e;switch(console.log("SERP content script received message",e),i){case o.GET_SERP_RULES_RESPONSE:this.onRulesReceived(e);break;case o.CHECK_SERP_URLS_RESPONSE:this.onUrlsChecked(n);break;default:console.warn("Unable to handle event - "+i)}return!0}onRulesReceived(e){if(this.rules=e.payload[this.host]||null,null!==this.rules){this.addSerpClassToBodyElement();var t="YAHOO"===this.rules.serpProvider?100:"DUCKDUCKGO"===this.rules.serpProvider?800:0;setTimeout(function(){if(this.extract()){var e=this.extracted.map(function(e){return{url:e.url}});E.sendMessage(new n(o.CHECK_SERP_URLS,e))}else R&&console.log("Failed to extract URLs from SERP",this.rules,this.host)}.bind(this),t)}else console.log("No rules found for host:",this.host)}addSerpClassToBodyElement(){document.body.classList.add("gayl-serp-"+this.rules.serpProvider)}onUrlsChecked(e){this.injectGlobalCss(),this.injectUi(e)}extract(){console.log("Extracting URLs from:",this.host,"using rules:",this.rules);var e=document.querySelectorAll(this.rules.containerSelector),t=this;return c(e,function(e){var r=e.querySelector(t.rules.donationRateSelector),n=e.querySelector(t.rules.titleSelector),o=e.querySelector(t.rules.visibleLinkSelector),i=e.querySelector(t.rules.urlSelector);n&&o&&(p(i,"#ff919154"),p(o,"#91ffb454"),p(n,"#ff919154"),p(e,"#ccc"),t.extracted.push({container:e,title:n,visibleLink:o,url:i.href,urlContainer:i,donationRateTarget:r}))}),R&&(console.log("Extracted:"),this.log()),this.extracted.length>0}injectGlobalCss(){var e=u("style");e.type="text/css",e.appendChild(f(this.rules.additionalCss)),document.head.appendChild(e)}injectUi(e){for(var t=0;t<e.length;t++){var r=e[t],n=this.extracted[t],o=r.merchant,i=n.title,a=n.visibleLink,s=n.container,u=(n.urlContainer,n.donationRateTarget);if(!i||!a)return;o&&"Y"===o.notification&&(this.injectLogoAndStoreRate(u,o),this.injectTurnOnButton(s,o))}}injectLogoAndStoreRate(e,t){var r=u("span","gayl-logo"),n=u("span","gayl-store-rate"),o=a.replace("$$maxStoreRate$$",this.getStoreRateText(t));n.appendChild(f(o));var i=u("a","gayl-container");i.href=t.clickthroughUrl,i.appendChild(r),i.appendChild(n),l(i,e)}injectTurnOnButton(e,t){l(this.createButton(t),e)}getStoreRateText(e){if(e&&e.max)return this.domParser.parseFromString(e.max,"text/html").documentElement.textContent}createButton(e){if(e&&e.max){var t=i.replace("$$maxStoreRate$$",this.getStoreRateText(e)),r=u("a",["btn","btn-success","gayl-button"],t);return r.href=e.clickthroughUrl,r}}}function p(e,t){R&&null!=e&&e.style&&(e.style.backgroundColor=t)}h(function(){s(S,d(window.location.href))})},6:function(e,t){var r={RETAILER_CONFIRMATION:"RETAILER_CONFIRMATION",RETAILER_THANKYOU:"RETAILER_THANKYOU",HIDE_CONFIRMATION:"HIDE_CONFIRMATION",REMOVE_ALL:"REMOVE_ALL",GET_SERP_RULES_RESPONSE:"GET_SERP_RULES_RESPONSE",CHECK_SERP_URLS_RESPONSE:"CHECK_SERP_URLS_RESPONSE",RETAILER_CONFIRM:"RETAILER_CONFIRM",RETAILER_REJECT:"RETAILER_REJECT",GET_SERP_RULES:"GET_SERP_RULES",CHECK_SERP_URLS:"CHECK_SERP_URLS"};function n(e,t){t=t||{};this.isValidSubject(e)&&(this.subject=e),this.payload=t}n.prototype.isValidSubject=function(e){if(!r[e])throw new Error("Unknown message subject: "+e);return!0},e.exports={Message:n,MessageSubject:r}},63:function(e,t){},7:function(e,t){e.exports=function(e){var t=e||navigator.userAgent;return/windows phone/i.test(t)?"Windows":/android/i.test(t)?"Android":/iPad|iPhone|iPod/i.test(t)?"iOS":null}},8:function(e,t,r){var n=r(4),o=r(2),i={Chrome:"R0FZTF9CUk9XU0VSX0VYVF9DSFJPTUU6MnZMTG4qSkpyX3ZEOT1hKg==",Firefox:"R0FZTF9CUk9XU0VSX0VYVF9GSVJFRk9YOnRBM3lOWEJQWmR1YyVHTG0=",Edge:"R0FZTF9CUk9XU0VSX0VYVF9FREdFOmZ2Qmg4VHdMUDRHelNTQFI=",Safari:"R0FZTF9CUk9XU0VSX0VYVF9TQUZBUkk6LTZyRHZBJGREeHFHOW45Pw=="};e.exports={apiAuthHeader:function(){var e=n(),t=i[e];if(!t)throw new Error("Cannot find auth header for "+e);return"Basic "+t},extensionId:function(){return"undefined"!=typeof chrome&&chrome.runtime?chrome.runtime.id:"undefined"!=typeof safari?"synthetic":browser.runtime.id},ignoredSchemes:["about","chrome","chrome-extension","file","view-source","wyciwyg","favorites"],ignoredUrls:"(?:shareasale.com|paypal.(?:co.uk|com)|successfultogether.co.uk|tradedoubler.com|clkuk.pvnsolutions.com|paidonresults.net|linksynergy.com|doubleclick.net|affiliatefuture.com|omguk.com|healthtrader.com|digitalriver.com|veinteractive.com|track.webgains.com|jdoqocy.com)",permissionsUrl:"https://help.giveasyoulive.com/hc/en-us/articles/360017448352-New-Chrome-update-Donation-Reminder",processingDelayMs:1e3,requestTimeoutMs:7e3,sentryDsn:"https://7a19d517524a4954bb10e4bc21e4a4a9@sentry.io/1270266",thankYouDialogVisibleMs:7e3,uninstallUrl:"https://r1.dotmailer-surveys.com/7e21zb6c-623a1ufe",version:function(){return o.getManifest().version}}}});
//# sourceMappingURL=searchEngineContent.bundle.js.map